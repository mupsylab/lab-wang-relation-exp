const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./error-BcK_qQ9K.js","./vendor-CVIdNdG0.js"])))=>i.map(i=>d[i]);
var U=Object.defineProperty;var K=(o,s,e)=>s in o?U(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var g=(o,s,e)=>K(o,typeof s!="symbol"?s+"":s,e);import{d as V,a as S,c as F,u as Q,o as m,R as H,b as f,e as r,f as J,t as y,F as N,r as q,g as D,p as L,h as R,i as C,j as M,n as Y,k as W,l as z,m as w,q as k,H as I,C as O,s as G,v as X,w as Z,x as ee}from"./vendor-CVIdNdG0.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(t){if(t.ep)return;t.ep=!0;const c=e(t);fetch(t.href,c)}})();const te=V("color-scheme",{state(){return window.matchMedia("(prefers-color-scheme: dark)").matches?{colorScheme:"dark"}:{colorScheme:"light"}},getters:{currScheme(){return this.colorScheme}},actions:{switch(o){this.colorScheme=o}}}),se=S({__name:"App",setup(o){return(s,e)=>(m(),F(Q(H)))}}),ne="modulepreload",ie=function(o,s){return new URL(o,s).href},P={},oe=function(s,e,n){let t=Promise.resolve();if(e&&e.length>0){const c=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),_=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));t=Promise.all(e.map(u=>{if(u=ie(u,n),u in P)return;P[u]=!0;const l=u.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(!!n)for(let d=c.length-1;d>=0;d--){const p=c[d];if(p.href===u&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const i=document.createElement("link");if(i.rel=l?"stylesheet":ne,l||(i.as="script",i.crossOrigin=""),i.href=u,_&&i.setAttribute("nonce",_),document.head.appendChild(i),l)return new Promise((d,p)=>{i.addEventListener("load",d),i.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}return t.then(()=>s()).catch(c=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c})};class ${constructor(){g(this,"__preUrl","https://www.naodao.com/api");g(this,"__token","");g(this,"__id","");g(this,"__location","");g(this,"__itemId","");g(this,"__beginDate","");g(this,"getData",()=>"");this.init()}static getQueryString(s){for(var e=window.location.search.substring(1),n=e.split("&"),t=0;t<n.length;t++){var c=n[t].split("=");if(c[0]==s)return c[1]}return""}init(){var s=window.localStorage.getItem("__insula_l__"),e=s?JSON.parse(s):{};this.__beginDate=e.user&&e.user.beginDate,this.__token=$.getQueryString("__token"),this.__id=$.getQueryString("__id"),this.__itemId=$.getQueryString("__itemId"),this.__location=window.location.href,fetch(this.__preUrl+"/user/canvasNode/insertRecord",{method:"POST",headers:{accept:"application/json, text/plain, */*","content-type":"application/json"},body:JSON.stringify({nodeId:this.__id,recordId:this.__token,itemId:this.__itemId,beginDate:this.__beginDate?this.__beginDate:""})}).then(n=>n.json()).then(n=>{n.code===200&&console.log(n)})}save(){this.__token==="preview"||this.__location.includes("file://")?this.offlineSave(this.getData()):this.onlineSave(this.getData())}offlineSave(s){try{const e=new Blob([s],{type:"text/plain"});let n="";typeof window.webkitURL<"u"?n=window.webkitURL.createObjectURL(e):n=window.URL.createObjectURL(e);const t=document.createElement("a");return t.id="jspsych-download-as-text-link",t.style.display="none",t.download=`${this.__id}.csv`,t.href=n,t.click(),!0}catch{return!1}}onlineSave(s){const e=this;fetch(this.__preUrl+"/user/jsPsych/results",{method:"POST",headers:{accept:"application/json, text/plain, */*","content-type":"application/json"},body:JSON.stringify({experimentId:this.__id,token:this.__token,key:this.__id,value:s,state:1})}).then(n=>n.json()).then(n=>{console.log(n),n.code===200&&e.parent_post_message(e.__token,e.__id,!0,200,"实验作答完成，感谢你的耐心等待，继续下一步？")})}parent_post_message(s,e,n,t,c){window.parent.postMessage({recordId:s,nodeId:e,isCompleted:n,code:t,message:c})}beforeunload(s){s.preventDefault(),s.returnValue=!1}unload(){const s=this.getData;localStorage.setItem("tmpD"+new Date().getTime().toString(),JSON.stringify(Object.assign({},{__beginDate:this.__beginDate,__token:this.__token,__id:this.__id,__itemId:this.__itemId,__location:this.__location,state:0},{data:s()})))}}const T=(o,s)=>{const e=o.__vccOpts||o;for(const[n,t]of s)e[n]=t;return e},ae={};function re(o,s){return m(),f("div",null," 实验结束 ")}const ce=T(ae,[["render",re]]),le={class:"insturction-all-box"},de=J('<div id="md-box" data-v-244dfaa4><div class="content" data-v-244dfaa4>欢迎参加本次实验！接下来你将会回答有关你的社交网络的问题。</div><div class="head1" data-v-244dfaa4>指导语</div><div class="content" data-v-244dfaa4>在游戏过程中，你需要输入那些你认识并与之互动的家人、朋友、熟悉的人的名字。</div><div class="content" data-v-244dfaa4>你的每段关系都会在你的宇宙中拥有属于自己的部分，为了让你创造最完整的宇宙，你将需要把人们分成6个不同的组（<strong data-v-244dfaa4>同一个人可以出现在不同组中</strong>）：</div><ul class="list1" data-v-244dfaa4><li data-v-244dfaa4>家人</li><li data-v-244dfaa4>朋友</li><li data-v-244dfaa4>打电话</li><li data-v-244dfaa4>发短信</li><li data-v-244dfaa4>面对面</li><li data-v-244dfaa4>社交媒体（例如，微信，QQ，微博…）</li></ul><div class="head1" data-v-244dfaa4>关于隐私</div><div class="content" data-v-244dfaa4>在开始前，还有一件更重要的事</div><div class="content" data-v-244dfaa4>在完成游戏后，我们将尽一切可能使数据尽可能匿名。我们将删除你所有朋友和家人的姓名/昵称。</div><div class="content" data-v-244dfaa4>例如，如果你输入“爸爸，妈妈，李华，赵腾飞”，我们将会把名字转换成“1，2，3，4”，我们将不会存储任何名字。</div><div class="content" data-v-244dfaa4>祝你玩得愉快！</div></div>',1),ue={class:"button-box"},_e=S({__name:"insturctionAll",emits:["endTrials"],setup(o,{emit:s}){const e=s;return(n,t)=>(m(),f("div",le,[de,r("div",ue,[r("div",{class:"check",onClick:t[0]||(t[0]=c=>e("endTrials"))},"开始实验")])]))}}),pe=T(_e,[["__scopeId","data-v-244dfaa4"]]),he=o=>(L("data-v-4d67908a"),o=o(),R(),o),me={class:"input-name-box"},fe={class:"title-box"},ve={class:"title"},ye=he(()=>r("div",{class:"desc"},[r("div",null,"请您依据上方的标题，思考一下与此标题相关的人员，并在下方当中写下1~10人的姓名。"),r("div",null,[r("strong",null,"不同人名字不能重复"),C("，若有重复可以结尾添加数字，比如：李四1。")])],-1)),ge={class:"input-box"},be={class:"input-content"},xe=["name","value"],Se=["name"],we={class:"button-box"},ke=S({__name:"inputName",props:{inputType:{type:String,default:""},showBackButton:{type:Boolean,default:!1},recordInputs:{type:Array,default:[]}},emits:["endTrial","back"],setup(o,{emit:s}){const e=o,n=s,t=[0,1,2,3,4,5,6,7,8,9],c=()=>{const _=document.querySelectorAll(".input-content input");let u=!1;const l=[];return _.forEach(h=>{const v=h;l.indexOf(v.value)>=0&&(u=!0),v.value.length&&l.push(v.value)}),u?(alert("存在重复名字，请修改"),[]):l},a=()=>{const _=c();_.length?n("endTrial",_):alert("当前未输入任何名字，请输入")};return(_,u)=>(m(),f("div",me,[r("div",fe,[r("div",ve,y(e.inputType),1),ye]),r("div",ge,[(m(),f(N,null,q(t,l=>r("div",be,[l<e.recordInputs.length?(m(),f("input",{key:0,type:"text",name:l.toString(),placeholder:"输入姓名",autocomplete:"off",value:e.recordInputs[l]},null,8,xe)):(m(),f("input",{key:1,type:"text",name:l.toString(),placeholder:"输入姓名",autocomplete:"off"},null,8,Se))])),64))]),r("div",we,[e.showBackButton?(m(),f("div",{key:0,onClick:u[0]||(u[0]=l=>n("back",c()))},"上一步")):D("",!0),r("div",{onClick:a},"下一步")])]))}}),$e=T(ke,[["__scopeId","data-v-4d67908a"]]),Te=o=>(L("data-v-2587f9b0"),o=o(),R(),o),Ie={class:"name-know-box"},Oe=Te(()=>r("div",{class:"title-box"},[r("div",{class:"desc"},"下面是你所认识的人，你需要判断他们之间是否彼此认识，若认识请点击中间的圆点。")],-1)),Ne={class:"display-box"},qe=["onClick"],Ee={class:"left"},De={class:"right"},Le={class:"button-box"},Re=S({__name:"nameKnow",props:{pairNames:{},leave:{}},emits:["endTrials"],setup(o,{emit:s}){const e=s,n=o,t=M([]);for(let a=0;a<n.pairNames.length;a++)t.value.push(!1);const c=a=>{t.value[a]=!t.value[a]};return(a,_)=>(m(),f("div",Ie,[Oe,r("div",Ne,[(m(!0),f(N,null,q(n.pairNames,(u,l)=>(m(),f("div",{class:"content-box",onClick:h=>c(l)},[r("div",Ee,y(u[0]),1),r("div",{class:Y({radio:!0,activate:t.value[l]})},null,2),r("div",De,y(u[1]),1)],8,qe))),256))]),r("div",null,"当前还剩下:"+y(a.leave),1),r("div",Le,[r("div",{class:"submit",onClick:_[0]||(_[0]=u=>{e("endTrials",t.value)})},"提交")])]))}}),je=T(Re,[["__scopeId","data-v-2587f9b0"]]),Pe=o=>(L("data-v-04a35363"),o=o(),R(),o),Ce={class:"info-name-box"},Be={class:"title-box"},Ae={class:"title"},Ue={class:"desc"},Ke={class:"q-box"},Ve={class:"text"},Fe={class:"title"},Qe={class:"desc"},He={key:0,class:"radio"},Je=["for"],Me=["name","id","value"],Ye={key:1,class:"number"},We=["name"],ze=Pe(()=>r("input",{type:"submit",hidden:""},null,-1)),Ge=S({__name:"infoName",props:{name:{},desc:{},leave:{}},emits:["endTrial"],setup(o,{emit:s}){const e=s,n=o,t=[{type:"radio",title:"你最近与这个人互动是什么时候？",choices:["过去1周内","1周前但在过去1个月内","1个月前但在过去6个月内","6个月前"],require:!0},{type:"radio",title:"你们的关系是什么？",choices:["朋友","同学","家人","其他"],require:!0},{type:"number",title:"这个人多大了？",desc:"请为每个人输入一个数字。如果您不确定，请输入您猜测的年龄。",require:!0},{type:"radio",title:"这个人的性别是什么？",choices:["男","女","其他"],require:!0},{type:"radio",title:"这个人和你是同一种族，还是不同种族？",choices:["相同种族","不同种族","不确定"],require:!0},{type:"radio",title:"你有多喜欢这个人？",choices:["非常不喜欢","有点不喜欢","一般","有点喜欢","非常喜欢"],require:!0},{type:"radio",title:"当好事发生时，您去找这个人的可能性有多大？",choices:["非常不可能","不太可能","中立","可能","非常可能"],require:!0},{type:"radio",title:"当一些糟糕的事情发生时，您去找这个人的可能性有多大？",choices:["非常不可能","不太可能","中立","可能","非常可能"],require:!0}],c=()=>{document.querySelector("input[type=submit]").click()},a=_=>{_.preventDefault();const u={};return document.querySelectorAll("input").forEach(h=>{(h.type=="radio"&&h.checked||["number"].indexOf(h.type)>=0)&&(u[h.name]=h.value)}),e("endTrial",u),!1};return(_,u)=>(m(),f("div",Ce,[r("div",Be,[r("div",Ae,y(n.name),1),r("div",Ue,y(n.desc),1)]),r("form",{class:"question-box",action:"",onSubmit:a},[(m(),f(N,null,q(t,(l,h)=>r("div",Ke,[r("div",Ve,[r("div",Fe,y(l.title),1),r("div",Qe,y(l.desc),1)]),l.type=="radio"?(m(),f("div",He,[(m(!0),f(N,null,q(l.choices,(v,i)=>(m(),f("label",{for:`${h}_${i}`},[r("input",{type:"radio",name:`${h}`,id:`${h}_${i}`,value:`${i}`,required:""},null,8,Me),C(" "+y(v),1)],8,Je))),256))])):D("",!0),l.type=="number"?(m(),f("div",Ye,[r("input",{type:"number",name:`${h}`,min:"1",max:"99",required:""},null,8,We)])):D("",!0)])),64)),ze],32),r("div",null,"当前还剩余: "+y(n.leave),1),r("div",{class:"button-box"},[r("div",{class:"submit",onClick:c},"提交")])]))}}),Xe=T(Ge,[["__scopeId","data-v-04a35363"]]),Ze={id:"exp"},et=S({__name:"default",setup(o){const s=new $;s.getData=()=>e.data.get().filter({save:!0}).csv();const e=W({display_element:"exp",on_finish(){s.save();const i=document.querySelector("#exp");i.innerHTML="",w(k(ce),i)}}),n=[];n.push({type:I,stimulus:"<div id='box'></div>",choices:["NO_KEYS"],on_load(){w(k(pe,{onEndTrials(){e.finishTrial()}}),document.querySelector("#box"))}});const t=()=>{const i=e.data.get().filter({save:!0}).values(),d=new Set,p=[];for(let b=i.length-1;b>=0;b--){const{name_type:x,name_resp:E}=i[b];p.indexOf(x)>=0||(p.push(x),E.forEach(A=>{d.add(A)}))}return Array.from(d)},c=i=>{const d=e.data.get().filter({save:!0}).values();for(let p=d.length-1;p>=0;p--){const{name_type:b,name_resp:x}=d[p];if(b==i)return x}return[]};let a=[],_=0;const u=[{inputTitle:"家人"},{inputTitle:"好朋友"},{inputTitle:"使用手机通话交流"},{inputTitle:"使用手机打字交流"},{inputTitle:"过去一周面对面交流"},{inputTitle:"过去一周用社交媒体互动"}];n.push({type:O,func(){_=0}},{timeline:[{type:I,choices:["NO_KEYS"],stimulus:'<div id="box"></div>',on_load(){const i=u[_].inputTitle;console.log(c(i)),w(k($e,{inputType:i,showBackButton:_>0,recordInputs:c(i),onEndTrial(d){e.finishTrial({name_resp:d,name_type:i})},onBack(d){_-=2,_<=0&&(_=0),e.finishTrial({name_resp:d,name_type:i})}}),document.querySelector("#box")),_+=1},on_finish(i){const{name_resp:d,name_type:p}=i;e.data.write(Object.assign({},{save:!0,exper_type:"getName",name_type:p,name_resp:d}))}}],loop_function(){return!(_>=u.length)}},{type:O,func(){a=t()}});let l=[];const h=i=>{const d=[];i>l.length&&(i=l.length);for(let p=0;p<i;p++){const b=Math.floor(Math.random()*l.length),[x,E]=l.splice(b,1)[0];d.push([a[x],a[E]])}return d};n.push({type:O,func(){const i=a.length;i<5&&(alert("填写人数小于5，无法完成实验~"),location.reload());for(let d=0;d<i;d++)for(let p=0;p<d;p++)l.push([d,p])}},{timeline:[{type:I,stimulus:'<div id="box"></div>',choices:["NO_KEYS"],on_load(){const i=h(6);w(k(je,{pairNames:i,leave:l.length,onEndTrials(d){e.finishTrial({pair_resp:Array.from(d),pair_names:i})}}),document.querySelector("#box"))},on_finish(i){const{pair_names:d,pair_resp:p}=i;e.data.write(Object.assign({},{save:!0,exper_type:"pairName",pair_names:d,pair_resp:p}))}}],loop_function(){return l.length>0}});let v=0;return n.push({type:O,func(){v=0}},{timeline:[{type:I,stimulus:'<div id="box"></div>',choices:["NO_KEYS"],on_load(){w(k(Xe,{name:a[v],desc:"下面需要您回答与此人相关的一些问题",leave:a.length-v,onEndTrial(i){e.finishTrial(Object.assign({},{save:!0,exper_type:"infoName",name:a[v]},i))}}),document.querySelector("#box"))},on_finish(){v+=1}}],loop_function(){return v<a.length}}),z(()=>{e.run(n)}),(i,d)=>(m(),f("div",Ze))}}),tt=G({history:X("./"),routes:[{path:"/",name:"jspsych",component:et,alias:"/exper"},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>oe(()=>import("./error-BcK_qQ9K.js"),__vite__mapDeps([0,1]),import.meta.url)}]}),st=Z(),j=ee(se);j.use(st);j.use(tt);j.mount("#app");const B=te();B.switch("dark");document.body.classList.add(B.currScheme);
